
--// MH Prison Life v1.1 (Mobile)
--// by Miel
--// ESP • Aimbot • FPS Boost • TP • Escape

-- SERVICES
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local UIS = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- STATE
local State = {
	Aimbot = false,
	ESP = false,
	NameESP = false,
	DistanceESP = false,
	TeamFilter = "Criminal", -- Criminal / Guard / Inmate
	FPSBoost = false
}

--==============================
-- UI (leve, mobile)
--==============================
local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "MH_UI"

local main = Instance.new("Frame", gui)
main.Size = UDim2.fromScale(0.4, 0.45)
main.Position = UDim2.fromScale(0.3, 0.25)
main.BackgroundColor3 = Color3.fromRGB(20,20,20)
main.Active, main.Draggable = true, true

local title = Instance.new("TextLabel", main)
title.Size = UDim2.fromScale(1,0.12)
title.Text = "MH Prison Life v1.1 (beta)"
title.TextColor3 = Color3.new(1,1,1)
title.BackgroundTransparency = 1
title.TextScaled = true

local function btn(txt,y,callback)
	local b = Instance.new("TextButton", main)
	b.Size = UDim2.fromScale(0.9,0.08)
	b.Position = UDim2.fromScale(0.05,y)
	b.Text = txt
	b.TextScaled = true
	b.BackgroundColor3 = Color3.fromRGB(35,35,35)
	b.TextColor3 = Color3.new(1,1,1)
	b.MouseButton1Click:Connect(callback)
	return b
end

--==============================
-- BUTTONS
--==============================
btn("AIMBOT ON / OFF",0.15,function()
	State.Aimbot = not State.Aimbot
end)

btn("ESP ON / OFF",0.25,function()
	State.ESP = not State.ESP
end)

btn("NAME ESP",0.35,function()
	State.NameESP = not State.NameESP
end)

btn("DISTANCE ESP",0.45,function()
	State.DistanceESP = not State.DistanceESP
end)

btn("FPS BOOST",0.55,function()
	State.FPSBoost = not State.FPSBoost
	if State.FPSBoost then
		Lighting.GlobalShadows = false
		Lighting.FogEnd = 9e9
	end
end)

btn("TP BASE CRIMINAL",0.65,function()
	LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(0,5,0)
end)

btn("TP SPAWN GUARD",0.75,function()
	LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(820,101,2230)
end)

btn("ESCAPE PRISON",0.85,function()
	LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(390,79,1986)
	task.wait(0.5)
	LocalPlayer.Character.Humanoid.Health = 0
end)

--==============================
-- ESP (Highlight + Billboard)
--==============================
local ESPCache = {}

local function setupESP(plr)
	if plr == LocalPlayer then return end

	local highlight = Instance.new("Highlight")
	highlight.FillColor = Color3.fromRGB(255,0,0)
	highlight.FillTransparency = 0.4
	highlight.Enabled = false
	highlight.Parent = gui

	local bill = Instance.new("BillboardGui")
	bill.Size = UDim2.fromOffset(100,40)
	bill.AlwaysOnTop = true
	bill.Enabled = false
	bill.Parent = gui

	local txt = Instance.new("TextLabel", bill)
	txt.Size = UDim2.fromScale(1,1)
	txt.BackgroundTransparency = 1
	txt.TextScaled = true
	txt.TextColor3 = Color3.new(1,1,1)

	ESPCache[plr] = {Highlight=highlight,Bill=bill,Text=txt}
end

for _,p in pairs(Players:GetPlayers()) do setupESP(p) end
Players.PlayerAdded:Connect(setupESP)

RunService.RenderStepped:Connect(function()
	for plr,data in pairs(ESPCache) do
		local char = plr.Character
		local hrp = char and char:FindFirstChild("HumanoidRootPart")
		if not hrp then continue end

		data.Highlight.Adornee = char
		data.Highlight.Enabled = State.ESP

		data.Bill.Adornee = hrp
		data.Bill.Enabled = State.ESP and (State.NameESP or State.DistanceESP)

		local dist = math.floor((Camera.CFrame.Position - hrp.Position).Magnitude)
		data.Text.Text =
			(State.NameESP and plr.Name or "") ..
			(State.DistanceESP and (" ["..dist.."m]") or "")
	end
end)

--==============================
-- AIMBOT (leve, sem grudar)
--==============================
local function getTarget()
	local closest,dist = nil,math.huge
	for _,p in pairs(Players:GetPlayers()) do
		if p~=LocalPlayer and p.Character and p.Character:FindFirstChild("Head") then
			local d = (Camera.CFrame.Position - p.Character.Head.Position).Magnitude
			if d < dist and d < 300 then
				dist,closest = d,p
			end
		end
	end
	return closest
end

RunService.RenderStepped:Connect(function()
	if not State.Aimbot then return end
	local t = getTarget()
	if t and t.Character then
		Camera.CFrame = CFrame.new(
			Camera.CFrame.Position,
			t.Character.Head.Position
		)
	end
end)

print("MH Prison Life v1.1 carregado com sucesso!")
